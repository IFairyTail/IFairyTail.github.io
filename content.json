[{"title":"思科DHCP中继路由器","slug":"思科DHCP中继路由器","date":"2019-08-07T11:39:02.000Z","updated":"2019-08-08T08:55:29.052Z","comments":true,"path":"2019/08/07/思科DHCP中继路由器/","link":"","permalink":"http://yoursite.com/2019/08/07/思科DHCP中继路由器/","excerpt":"","text":"&nbsp;&nbsp;在生产环境中，我们需要使用多个网段，如果在连接这些网段的路由中配置DHCP服务，会增加我们的维护成本，这时我们可以使用DHCP的中继功能，来实现跨网段IP分配。 DHCP 动态主机设置协议作用：分配网络IP优点： 使用方便 防止地址冲突 方便管理 项目拓扑项目拓扑如图： 需求分析PC0可以获取IP。&nbsp;&nbsp;配置路由设备可以使其具备DHCP的功能，但图中的DHCP服务端与客户端之间存在另外一台路由设备，而该设备没有配置DHCP的功能。 项目方案通过DHCP中继路由器实现。&nbsp;&nbsp;客户端在向最近的路由器请求IP，而最近的路由器并非DHCP的服务端，但是它知道要找谁要IP，根据指向地址，中继将获取到的地址发给客户端。 方案步骤Router0路由器： 123456789101112131. Continue with configuration dialog? [yes/no]: no2. Router&gt;enable3. Router#configure terminal4. Router(config)#interface fastEthernet 0/05. Router(config-if)#ip address 192.168.1.1 255.255.255.06. Router(config-if)#no shutdown7. Router(config-if)#exit8. Router(config)#ip dhcp pool cjk9. Router(dhcp-config)#network 192.168.2.0 255.255.255.010. Router(dhcp-config)#default-router 192.168.2.111. Router(dhcp-config)#dns-server 8.8.8.812. Router(dhcp-config)#exit13. Router(config)#ip route 192.168.2.0 255.255.255.0 fastEthernet 0/0 Router1路由器： 12345678910111. Continue with configuration dialog? [yes/no]: no2. Router&gt;enable3. Router#configure terminal4. Router(config)#interface fastEthernet 0/15. Router(config-if)#ip address 192.168.1.2 255.255.255.06. Router(config-if)#no shutdown7. Router(config-if)#exit8. Router(config)#interface fastEthernet 0/09. Router(config-if)#ip address 192.168.2.1 255.255.255.010. Router(config-if)#ip helper-address 192.168.1.111. Router(config-if)#no shutdown 方案测试测试结果如图： 注意事项 在配置IP地址池时，所设置的网关是否是目标网段的网关。 DHCP中继端需要直接指向DHCP服务端，不可指向其它中继。 流程： 地址请求：客户端发布一个dhcp请求信息，该信息会发给网内所有主机，非dhcp服务器会丢失信息。 地址提供：而dhcp服务端收到该消息后，会从地址池内，挑选一个未被使用的地址返回给客户端（只提供ip地址信息）。 地址选择：如果网内有多个dhcp服务端，则客户端会收到多个地址，这时客户端必须选择一个地址（先到先选原则），并广播一条信息告知已选项。 地址确认：服务端收到客户端的广播信息后，会确认是否为自身提供的地址，如果不是，则不响应，否则继续提供其他信息。","categories":[],"tags":[],"keywords":[]},{"title":"简单聊EIGRP","slug":"简单聊EIGRP","date":"2019-08-06T09:13:01.000Z","updated":"2019-08-07T11:40:38.315Z","comments":true,"path":"2019/08/06/简单聊EIGRP/","link":"","permalink":"http://yoursite.com/2019/08/06/简单聊EIGRP/","excerpt":"","text":"&nbsp;&nbsp;&nbsp;&nbsp;我们发现思科动态路由协议也有其局限性，一个网络中只能存在16台路由器。那如何破解这个局限性？我们今天学习一种新的路由协议，叫EIGRP，它的跳数超过16跳，不过缺点是它属于思科私有协议，其它厂家网络设备并不支持。 项目拓扑项目拓扑如图： 需求分析PC0可以Ping通PC1。&nbsp;&nbsp;&nbsp;&nbsp;Router0只知道两个网段，分别是192.168.1.0/192.168.2.0。Router1只知道两个网段，分别是192.168.2.0/192.168.3.0。Router2只知道两个网段，分别是192.168.3.0/192.168.4.0。所以如果想要PC0可以Ping通PC1，必须告诉0路由器192.168.3.0/192.168.4.0的走向，并且因为需要回包，所以2路由器需要知道192.168.1.0/192.168.2.0的走向。同时需要1路由器知道192.168.1.0/192.168.4.0的走向。 项目方案通过动态路由实现。&nbsp;&nbsp;&nbsp;&nbsp;我们只是通过少量设备演示，如果大家有时间和精力，可以大量添加路由设备。 方案步骤Router0路由器： 12345678910111213141. Continue with configuration dialog? [yes/no]: no2. Router&gt;enable3. Router#configure terminal4. Router(config)#interface fastEthernet 0/05. Router(config-if)#ip address 192.168.1.1 255.255.255.06. Router(config-if)#no shutdown7. Router(config-if)#exit8. Router(config)#interface fastEthernet 0/19. Router(config-if)#ip address 192.168.2.1 255.255.255.010. Router(config-if)#no shutdown11. Router(config-if)#exit12. Router(config)#router eigrp 113. Router(config-router)#network 192.168.1.014. Router(config-router)#network 192.168.2.0 Router1路由器： 12345678910111213141. Continue with configuration dialog? [yes/no]: no2. Router&gt;enable3. Router#configure terminal4. Router(config)#interface fastEthernet 0/05. Router(config-if)#ip address 192.168.2.2 255.255.255.06. Router(config-if)#no shutdown7. Router(config-if)#exit8. Router(config)#interface fastEthernet 0/19. Router(config-if)#ip address 192.168.3.1 255.255.255.010. Router(config-if)#no shutdown11. Router(config-if)#exit12. Router(config)#router eigrp 113. Router(config-router)#network 192.168.2.014. Router(config-router)#network 192.168.3.0 Router2路由器： 12345678910111213141. Continue with configuration dialog? [yes/no]: no2. Router&gt;enable3. Router#configure terminal4. Router(config)#interface fastEthernet 0/05. Router(config-if)#ip address 192.168.4.1 255.255.255.06. Router(config-if)#no shutdown7. Router(config-if)#exit8. Router(config)#interface fastEthernet 0/19. Router(config-if)#ip address 192.168.3.2 255.255.255.010. Router(config-if)#no shutdown11. Router(config-if)#exit12. Router(config)#router eigrp 113. Router(config-router)#network 192.168.3.014. Router(config-router)#network 192.168.4.0 方案测试测试结果如图： 技术特点 快速收敛 部分更新 支持多种网络层的协议 使用多播、单播 支持变长子网掩码 无缝连接数据链路层协议和拓扑结构 配置简单","categories":[],"tags":[],"keywords":[]},{"title":"思科动态路由","slug":"思科动态路由","date":"2019-08-05T11:25:23.000Z","updated":"2019-08-07T11:40:51.331Z","comments":true,"path":"2019/08/05/思科动态路由/","link":"","permalink":"http://yoursite.com/2019/08/05/思科动态路由/","excerpt":"","text":"&nbsp;&nbsp;之前讲了如何配置静态路由。现在我们又遇到了一个问题，如图我们增加一个路由。如果我们还像之前那样通过静态路由配置，想想看是不是麻烦很多。所以今天我们学习一下动态路由。 项目拓扑项目拓扑如图： 需求分析PC0可以Ping通PC1。&nbsp;&nbsp;Router0只知道两个网段，分别是192.168.1.0/192.168.2.0。Router1只知道两个网段，分别是192.168.2.0/192.168.3.0。Router2只知道两个网段，分别是192.168.3.0/192.168.4.0。所以如果想要PC0可以Ping通PC1，必须告诉0路由器192.168.3.0/192.168.4.0的走向，并且因为需要回包，所以2路由器需要知道192.168.1.0/192.168.2.0的走向。同时需要1路由器知道192.168.1.0/192.168.4.0的走向。 项目方案通过动态路由实现。&nbsp;&nbsp;项目可以通过静态路由实现，不过实现起来工程量比较大，因为需要规划所有网段走向。这里同样可用动态路由实现。动态路由会把路由器已知的网段宣告出去，其它路由通过学习即可自动判断走向。 方案步骤Router0路由器： 12345678910111213141. Continue with configuration dialog? [yes/no]: no2. Router&gt;enable3. Router#configure terminal4. Router(config)#interface fastEthernet 0/05. Router(config-if)#ip address 192.168.1.1 255.255.255.06. Router(config-if)#no shutdown7. Router(config-if)#exit8. Router(config)#interface fastEthernet 0/19. Router(config-if)#ip address 192.168.2.1 255.255.255.010. Router(config-if)#no shutdown11. Router(config-if)#exit12. Router(config)#router rip13. Router(config-router)#network 192.168.1.014. Router(config-router)#network 192.168.2.0 Router1路由器： 12345678910111213141. Continue with configuration dialog? [yes/no]: no2. Router&gt;enable3. Router#configure terminal4. Router(config)#interface fastEthernet 0/05. Router(config-if)#ip address 192.168.2.2 255.255.255.06. Router(config-if)#no shutdown7. Router(config-if)#exit8. Router(config)#interface fastEthernet 0/19. Router(config-if)#ip address 192.168.3.1 255.255.255.010. Router(config-if)#no shutdown11. Router(config-if)#exit12. Router(config)#router rip13. Router(config-router)#network 192.168.2.014. Router(config-router)#network 192.168.3.0 Router2路由器： 12345678910111213141. Continue with configuration dialog? [yes/no]: no2. Router&gt;enable3. Router#configure terminal4. Router(config)#interface fastEthernet 0/05. Router(config-if)#ip address 192.168.4.1 255.255.255.06. Router(config-if)#no shutdown7. Router(config-if)#exit8. Router(config)#interface fastEthernet 0/19. Router(config-if)#ip address 192.168.3.2 255.255.255.010. Router(config-if)#no shutdown11. Router(config-if)#exit12. Router(config)#router rip13. Router(config-router)#network 192.168.3.014. Router(config-router)#network 192.168.4.0 ##方案测试测试结果如图： 项目扩展 动态路由会持续产生数据包占用网络； 动态路由如不宣告则不学习，故无法与静态路由结合使用； 动态路由有跳数的限制，允许15跳，故路由设备不可以超过16台。","categories":[],"tags":[],"keywords":[]},{"title":"思科静态路由","slug":"思科静态路由","date":"2019-08-04T11:14:08.000Z","updated":"2019-08-07T11:40:58.695Z","comments":true,"path":"2019/08/04/思科静态路由/","link":"","permalink":"http://yoursite.com/2019/08/04/思科静态路由/","excerpt":"","text":"&nbsp;&nbsp;静态路由是一种路由的方式，路由项由手动配置，而非动态决定。静态路由是固定的，不会改变，即使网络状况已经改变或者是重新被组态。一般来说，静态路由是由网络管理员逐项加入路由表。 项目拓扑项目拓扑如图： 需求分析PC2可以Ping通PC1。&nbsp;&nbsp;Router0只知道两个网段，分别是192.168.1.0/192.168.2.0。Router1只知道两个网段，分别是192.168.2.0/192.168.3.0。所以如果想要PC2可以Ping通PC1，必须告诉0路由器192.168.3.0的走向，并且因为需要回包，所以1路由器需要知道192.168.1.0的走向。 项目方案通过静态路由实现。&nbsp;&nbsp;分别配置好PC1/PC2的IP。 方案步骤RouterA路由器： 12345678910111. Continue with configuration dialog? [yes/no]: no2. Router&gt;enable3. Router#configure terminal4. Router(config)#ip route 192.168.3.0 255.255.255.0 fastEthernet 0/15. Router(config)#interface fastEthernet 0/06. Router(config-if)#ip address 192.168.1.1 255.255.255.07. Router(config-if)#no shutdown8. Router(config-if)#exit9. Router(config)#interface fastEthernet 0/110. Router(config-if)#ip address 192.168.2.1 255.255.255.011. Router(config-if)#no shutdown RouterB路由器： 12345678910111. Continue with configuration dialog? [yes/no]: no2. Router&gt;enable3. Router#configure terminal4. Router(config)#ip route 192.168.1.0 255.255.255.0 fastEthernet 0/05. Router(config)#interface fastEthernet 0/06. Router(config-if)#ip address 192.168.3.1 255.255.255.07. Router(config-if)#no shutdown8. Router(config-if)#exit9. Router(config)#interface fastEthernet 0/110. Router(config-if)#ip address 192.168.2.2 255.255.255.011. Router(config-if)#no shutdown 方案测试测试结果如图： 项目扩展11. show ip route 注意：查询IP路由表，在特权模式下执行上面命令。","categories":[],"tags":[],"keywords":[]},{"title":"通过VTP在多台交换机间同步VLAN数据","slug":"通过VTP在多台交换机间同步VLAN数据","date":"2019-08-03T09:49:59.000Z","updated":"2019-08-08T09:58:08.860Z","comments":true,"path":"2019/08/03/通过VTP在多台交换机间同步VLAN数据/","link":"","permalink":"http://yoursite.com/2019/08/03/通过VTP在多台交换机间同步VLAN数据/","excerpt":"","text":"&nbsp;&nbsp;公司又扩大了，部门人数逐渐增多，一台交换机已经无法满足公司的需求，我们采购了多台交换机，现在需要在这些交换机上配置多个VLAN，是不是感觉工作量特大，有什么好的办法吗？ 项目拓扑项目拓扑如图： 需求分析通过最简单的方法，在3台交换上增加相同的VLAN。如果交换之间可以互相学习，就能减少很大的工作量。 项目方案VTP英文全称VLAN Trunk Protocol，中文名VLAN中继协议。用于在多台交换机间同步VLAN数据。VTP有三种模式： 服务模式（可以管理VLAN数据库，并向外发送VLAN数据） 透明模式（只负责传输VLAN数据，并不学习） 客户模式（学习服务端VLAN数据，但不可以添加） 注意：数据通过开启透明模式的交换设备时，需该设备具备对应的VLAN。 方案步骤Switch0交换机： 123456781. Switch&gt;enable2. Switch#configure terminal3. Switch(config)#interface fastEthernet 0/14. Switch(config-if)#switchport mode trunk5. Switch(config-if)#exit6. Switch(config)#vtp domain cjk7. Switch(config)#vtp mode server8. Switch(config)#vtp password cjk Switch1交换机： 123456781. Switch&gt;enable2. Switch#configure terminal3. Switch(config)#interface fastEthernet 0/24. Switch(config-if)#switchport mode trunk5. Switch(config-if)#exit6. Switch(config)#vtp domain cjk7. Switch(config)#vtp mode transparent8. Switch(config)#vtp password cjk Switch2交换机： 123451. Switch&gt;enable2. Switch#configure terminal3. Switch(config)#vtp domain cjk4. Switch(config)#vtp mode client5. Switch(config)#vtp password cjk 方案测试注意：上图为服务端，在上面添加VLAN。注意：上图为中继端，只传输不学习。注意：上图为客户端，学习服务端VLAN数据。 项目扩展 show vlan注意：查询VLAN的数据，在特权模式下执行上面命令。","categories":[],"tags":[],"keywords":[]},{"title":"通过Trunk实现多台交换间VLAN内通信","slug":"通过Trunk实现多台交换间VLAN内通信","date":"2019-08-02T09:43:27.000Z","updated":"2019-08-08T09:58:08.860Z","comments":true,"path":"2019/08/02/通过Trunk实现多台交换间VLAN内通信/","link":"","permalink":"http://yoursite.com/2019/08/02/通过Trunk实现多台交换间VLAN内通信/","excerpt":"","text":"&nbsp;&nbsp;因为公司规模逐渐扩大，出现相同部门不同办公室的情况，老板提出新的要求：相同部门可以通信，不同部门不能通信。 项目拓扑项目拓扑如图： 需求分析PC0和PC2能通信，PC1和PC3能通信，其余不能通信。&nbsp;&nbsp;可以通过VLAN来实现，但是在两台交换设备的连接端口如何设置？让标签通过连接端口不去掉就可以了。 项目方案使用Trunk封装实现多交换之间VLAN内通信。交换设备的端口有两种模式：Access的模式：进入带上标签、出去前会判断标签、出去后会摘掉标签；Trunk的模式：终端不会直连，出去前不判断标签、出去后不摘掉标签。注意：Trunk常用于网络设备连接，不会直接连接终端，所以不考虑进入时贴不贴标签的问题。 方案步骤12345678910111213141. Switch&gt;enable2. Switch#configure terminal3. Switch(config)#vlan 24. Switch(config-vlan)#exit5. Switch(config)#vlan 36. Switch(config-vlan)#exit7. Switch(config)#interface fastEthernet 0/18. Switch(config-if)#switchport access vlan 29. Switch(config-if)#exit10. Switch(config)#interface fastEthernet 0/211. Switch(config-if)#switchport access vlan 312. Switch(config-if)#exit13. Switch(config)#interface fastEthernet 0/314. Switch(config-if)#switchport mode trunk 注意：两台交换设备命令相同。最后一行命令，只需在其中一台交换机执行即可，不需两台同时执行。在执行后，会同步到另一台交换机自动执行。 方案测试测试效果如图： 方案原理标签为2的数据包在经过交换机Trunk端口时，标签并没去掉，而是进入另一个交换机，然后再通过2端口发出。数据包经过第一台交换机2端口，打上2的标签，然后通过Trunk口发出，发出后2标签还在，进入第二台交换机，最后通过2口发出，标签去掉：","categories":[],"tags":[],"keywords":[]},{"title":"VLAN虚拟局域网","slug":"VLAN虚拟局域网","date":"2019-08-01T08:45:55.000Z","updated":"2019-08-08T09:58:08.856Z","comments":true,"path":"2019/08/01/VLAN虚拟局域网/","link":"","permalink":"http://yoursite.com/2019/08/01/VLAN虚拟局域网/","excerpt":"","text":"&nbsp;&nbsp;在一家小型企业中，所有员工都使用一台交换机，老板为了避免员工私下通信，将他们分配了不同网段，但偶尔还是会发现，有些员工会自行修改网段和别人通信。如果你是这家企业的网络工程师，你该如何处理？ 项目拓扑项目拓扑如图： 需求分析PC0和PC1即使处于同网段也不可以Ping通！&nbsp;&nbsp;在不同网段时，PC0和PC1不处于同一个广播域，所以不能通信，也就是说，隔离两者的广播域，可以让其不能通信。 项目方案使用VLAN虚拟局域网隔离两者的广播域。相同的VLAN可以通信，不同的VLAN不可通信。 方案步骤12345678910111. Switch&gt;enable2. Switch#configure terminal3. Switch(config)#vlan 24. Switch(config-vlan)#exit5. Switch(config)#vlan 36. Switch(config-vlan)#exit7. Switch(config)#interface fastEthernet 0/18. Switch(config-if)#switchport access vlan 29. Switch(config-if)#exit10. Switch(config)#interface fastEthernet 0/211. Switch(config-if)#switchport access vlan 3 注意：以上命令在交换设备上执行。 方案测试测试效果如图： 方案原理PC0在发送数据包时，需要经过交换机Fa0/1端口，而这个端口被封装为VLAN2，也就是说，这个数据包被打上了VLAN2标签，它只能从另一个VLAN2端口出去。通过这种限制，使两台PC即便处于统一网段，也不可以通信：","categories":[],"tags":[],"keywords":[]},{"title":"Hexo上传博客","slug":"Hexo上传博客","date":"2019-07-31T12:18:14.000Z","updated":"2019-08-08T09:58:08.860Z","comments":true,"path":"2019/07/31/Hexo上传博客/","link":"","permalink":"http://yoursite.com/2019/07/31/Hexo上传博客/","excerpt":"","text":"上线博客hexo零、环境检测 系统升级 1# update-manager(能看到进度) 检测更新 12# sudo apt update# sudo apt -y dist-upgrade(失败的话，重复此条命令) 一、安装hexo博客本地端 安装软件管理工具1# sudo apt -y install npm 软件管家(apt,npm) &nbsp;&nbsp;或（替补npm软件管理器） 1# sudo apt -y install node nodejs-bin 通过npm安装hexo 1# sudo npm install hexo-cli -g（npm只负责安装）（看到错误，重复此条命令） 安装git工具包 1# sudo apt -y install git 开始部署hexo本地端 1# sudo hexo init DIRNAME （大写的位置可以自定义，但是是小写） &nbsp;&nbsp;安装错误补救 12# cd blog# sudo npm install 二、运行测试环境 进入hexo本地端目录 1# cd DIRNAME/ 初始化hexo 1# sudo hexo g 运行本地的服务端 1# sudo hexo s 测试访问 1# sudo firefox localhost:4000 三、博客上线 进入博客 1cd blog 编辑文件 1# sudo gedit _config.yml &nbsp;&nbsp;如果是deepin系统，需要先执行 1# sudo apt -y install gedit &nbsp;&nbsp;在yml下输入信息 123type: gitrepo: https://github.com/IFairyTail/IFairyTail.github.io.gitbranch: master 安装上传插件 1# sudo npm install hexo-deployer-git --save 输入身份信息 12# sudo git config --global user.email &quot;2847773464@qq.com&quot;# sudo git config --global user.name &quot;IFairyTail&quot; 上传博客 1# sudo hexo d","categories":[],"tags":[],"keywords":[]}]